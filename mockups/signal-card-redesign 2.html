<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Signal Card Redesign - Interactive Mockup</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      /* Supabase Design System Colors */
      --primary: #f5b700;        /* Golden yellow - brand color */
      --card: #1f1f1f;           /* Dark card background */
      --background: #161616;     /* Dark background */
      --border: #262626;         /* Border color */
      --muted: #262626;          /* Muted elements */
      --muted-foreground: #d0d0d0; /* Muted text */
      --foreground: #e8e8e8;     /* Main text */
      --destructive: #ff6b6b;    /* Destructive actions */
    }

    body {
      background: var(--background);
      color: var(--foreground);
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }

    /* Power Button Styles */
    .power-button {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
      border: none;
      flex-shrink: 0;
    }

    .power-button.enabled {
      background: #10b981; /* Tailwind green-500 */
    }

    .power-button.enabled:hover {
      background: #059669; /* green-600 */
      box-shadow: 0 0 12px rgba(16, 185, 129, 0.3);
      transform: scale(1.05);
    }

    .power-button.disabled {
      background: var(--muted);
      border: 1px solid var(--border);
    }

    .power-button.disabled:hover {
      background: #2a2a2a;
      border-color: var(--primary);
    }

    .power-button:active {
      transform: scale(0.95);
    }

    .power-button.loading {
      pointer-events: none;
      opacity: 0.7;
    }

    /* Favorite Button Styles */
    .favorite-button {
      width: 32px;
      height: 32px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
      background: transparent;
      border: none;
      color: var(--muted-foreground);
      flex-shrink: 0;
    }

    .favorite-button:hover {
      background: rgba(245, 183, 0, 0.1);
      color: var(--primary);
    }

    .favorite-button.favorited {
      background: rgba(245, 183, 0, 0.1);
      color: var(--primary);
      box-shadow: 0 0 8px rgba(245, 183, 0, 0.2);
    }

    .favorite-button.favorited:hover {
      background: rgba(245, 183, 0, 0.15);
      box-shadow: 0 0 12px rgba(245, 183, 0, 0.3);
    }

    /* Expand Button Styles */
    .expand-button {
      width: 32px;
      height: 32px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
      background: transparent;
      border: none;
      color: var(--muted-foreground);
      flex-shrink: 0;
    }

    .expand-button:hover {
      background: rgba(255, 255, 255, 0.05);
    }

    .expand-button svg {
      transition: transform 200ms cubic-bezier(0.4, 0, 0.2, 1);
    }

    .expand-button.expanded svg {
      transform: rotate(180deg);
    }

    /* Card Styles */
    .signal-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 8px;
      overflow: hidden;
      transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
      margin-bottom: 12px;
    }

    .signal-card:hover {
      border-color: rgba(245, 183, 0, 0.5);
    }

    .signal-card.disabled {
      opacity: 0.5;
    }

    .signal-card-header {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 0 12px;
      height: 40px;
      cursor: pointer;
    }

    .signal-card-header:hover {
      background: rgba(255, 255, 255, 0.02);
    }

    .signal-name {
      flex: 1;
      font-size: 14px;
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      min-width: 0;
    }

    .signal-name.enabled {
      color: var(--primary);
    }

    .signal-name.disabled {
      color: var(--muted-foreground);
    }

    .status-badge {
      font-size: 11px;
      font-weight: 600;
      padding: 2px 8px;
      border-radius: 4px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .status-badge.triggered {
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid rgba(16, 185, 129, 0.2);
      color: #10b981;
    }

    .status-badge.watching {
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid rgba(59, 130, 246, 0.2);
      color: #3b82f6;
    }

    .expanded-content {
      max-height: 0;
      opacity: 0;
      overflow: hidden;
      transition: max-height 200ms cubic-bezier(0.4, 0, 0.2, 1),
                  opacity 200ms cubic-bezier(0.4, 0, 0.2, 1);
    }

    .expanded-content.show {
      max-height: 400px;
      opacity: 1;
    }

    .expanded-content-inner {
      padding: 16px;
    }

    /* Spinner animation */
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .spinner {
      animation: spin 0.6s linear infinite;
    }

    /* Mobile styles */
    @media (max-width: 768px) {
      .signal-card-header {
        height: 48px;
      }

      .power-button,
      .favorite-button,
      .expand-button {
        width: 40px;
        height: 40px;
      }
    }

    /* Demo controls */
    .demo-controls {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 16px;
      max-width: 300px;
      z-index: 1000;
    }

    .demo-controls h3 {
      margin: 0 0 12px 0;
      font-size: 14px;
      font-weight: 600;
      color: var(--primary);
    }

    .demo-controls button {
      display: block;
      width: 100%;
      padding: 8px 12px;
      margin-bottom: 8px;
      background: rgba(245, 183, 0, 0.1);
      border: 1px solid rgba(245, 183, 0, 0.3);
      border-radius: 4px;
      color: var(--primary);
      cursor: pointer;
      font-size: 12px;
      transition: all 150ms;
    }

    .demo-controls button:hover {
      background: rgba(245, 183, 0, 0.2);
    }

    .info-text {
      font-size: 11px;
      color: var(--muted-foreground);
      margin-top: 8px;
      line-height: 1.4;
    }
  </style>
</head>
<body class="p-8">
  <div class="max-w-2xl mx-auto">
    <h1 class="text-2xl font-bold mb-2" style="color: var(--primary);">Signal Card Redesign - Interactive Mockup</h1>
    <p class="text-sm mb-8" style="color: var(--muted-foreground);">
      Click buttons to test interactions. Notice how buttons DON'T expand the card (stopPropagation).
    </p>

    <!-- Card 1: Enabled + Unfavorited + Collapsed -->
    <div class="signal-card" data-card="1">
      <div class="signal-card-header" onclick="toggleExpand(1)">
        <!-- Type Icon -->
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--muted-foreground); flex-shrink: 0;">
          <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
        </svg>

        <!-- Signal Name -->
        <span class="signal-name enabled">RSI Momentum Signal</span>

        <!-- Status Badge -->
        <span class="status-badge triggered">Triggered</span>

        <!-- Power Button -->
        <button class="power-button enabled" onclick="togglePower(event, 1)" aria-label="Disable signal" title="Disable signal">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <path d="M18.36 6.64a9 9 0 1 1-12.73 0"/>
            <line x1="12" y1="2" x2="12" y2="12"/>
          </svg>
        </button>

        <!-- Favorite Button -->
        <button class="favorite-button" onclick="toggleFavorite(event, 1)" aria-label="Add to favorites" title="Add to favorites">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
          </svg>
        </button>

        <!-- Expand Button -->
        <button class="expand-button" onclick="toggleExpand(event, 1)" aria-label="Expand card" title="Expand card">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="6 9 12 15 18 9"/>
          </svg>
        </button>
      </div>

      <!-- Expanded Content -->
      <div class="expanded-content" id="content-1">
        <div class="expanded-content-inner">
          <p style="color: var(--muted-foreground); font-size: 13px; line-height: 1.5; margin-bottom: 12px;">
            Detects oversold conditions when RSI drops below 30 with increasing volume, signaling potential reversal opportunities.
          </p>

          <h5 style="font-size: 12px; font-weight: 600; margin-bottom: 8px;">Conditions:</h5>
          <ul style="list-style: none; padding: 0; margin: 0 0 12px 0;">
            <li style="font-size: 12px; color: var(--muted-foreground); margin-bottom: 4px; padding-left: 12px; position: relative;">
              <span style="position: absolute; left: 0; color: var(--primary);">•</span>
              RSI(14) < 30 on 1h timeframe
            </li>
            <li style="font-size: 12px; color: var(--muted-foreground); margin-bottom: 4px; padding-left: 12px; position: relative;">
              <span style="position: absolute; left: 0; color: var(--primary);">•</span>
              Volume > 1.5x 20-period average
            </li>
            <li style="font-size: 12px; color: var(--muted-foreground); padding-left: 12px; position: relative;">
              <span style="position: absolute; left: 0; color: var(--primary);">•</span>
              Price above 200 EMA
            </li>
          </ul>

          <div style="padding-top: 12px; border-top: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; font-size: 11px; color: var(--muted-foreground);">
            <span>Last: 2h ago</span>
            <span>Signals: 47</span>
            <span style="text-transform: uppercase; letter-spacing: 0.5px;">MOMENTUM</span>
          </div>

          <div style="padding-top: 12px; border-top: 1px solid var(--border); margin-top: 12px; display: flex; gap: 8px;">
            <button onclick="alert('Edit clicked')" style="padding: 6px 12px; border: 1px solid var(--border); border-radius: 6px; background: transparent; color: var(--muted-foreground); font-size: 12px; cursor: pointer;">
              Edit
            </button>
            <button onclick="alert('Delete clicked')" style="padding: 6px 12px; border: 1px solid var(--destructive); border-radius: 6px; background: transparent; color: var(--destructive); font-size: 12px; cursor: pointer;">
              Delete
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Card 2: Enabled + Favorited + Collapsed -->
    <div class="signal-card" data-card="2">
      <div class="signal-card-header" onclick="toggleExpand(2)">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--muted-foreground); flex-shrink: 0;">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
        </svg>
        <span class="signal-name enabled">Volume Breakout Alert</span>
        <span class="status-badge watching">Watching</span>
        <button class="power-button enabled" onclick="togglePower(event, 2)" aria-label="Disable signal">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <path d="M18.36 6.64a9 9 0 1 1-12.73 0"/>
            <line x1="12" y1="2" x2="12" y2="12"/>
          </svg>
        </button>
        <button class="favorite-button favorited" onclick="toggleFavorite(event, 2)" aria-label="Remove from favorites">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2">
            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
          </svg>
        </button>
        <button class="expand-button" onclick="toggleExpand(event, 2)" aria-label="Expand card">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="6 9 12 15 18 9"/>
          </svg>
        </button>
      </div>
      <div class="expanded-content" id="content-2">
        <div class="expanded-content-inner">
          <p style="color: var(--muted-foreground); font-size: 13px;">Monitors unusual volume spikes indicating potential breakout moves.</p>
        </div>
      </div>
    </div>

    <!-- Card 3: Disabled + Unfavorited + Collapsed -->
    <div class="signal-card disabled" data-card="3">
      <div class="signal-card-header" onclick="toggleExpand(3)">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--muted-foreground); flex-shrink: 0;">
          <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
        </svg>
        <span class="signal-name disabled">MACD Crossover</span>
        <button class="power-button disabled" onclick="togglePower(event, 3)" aria-label="Enable signal">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <path d="M18.36 6.64a9 9 0 1 1-12.73 0"/>
            <line x1="12" y1="2" x2="12" y2="12"/>
          </svg>
        </button>
        <button class="favorite-button" onclick="toggleFavorite(event, 3)" aria-label="Add to favorites">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
          </svg>
        </button>
        <button class="expand-button" onclick="toggleExpand(event, 3)" aria-label="Expand card">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="6 9 12 15 18 9"/>
          </svg>
        </button>
      </div>
      <div class="expanded-content" id="content-3">
        <div class="expanded-content-inner">
          <p style="color: var(--muted-foreground); font-size: 13px;">Signal is currently disabled and not monitoring the market.</p>
        </div>
      </div>
    </div>

    <!-- Card 4: Loading State Demo -->
    <div class="signal-card" data-card="4">
      <div class="signal-card-header" onclick="toggleExpand(4)">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--muted-foreground); flex-shrink: 0;">
          <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
        </svg>
        <span class="signal-name enabled">Loading State Demo</span>
        <button class="power-button enabled loading" aria-label="Loading" disabled>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" class="spinner">
            <circle cx="12" cy="12" r="10"/>
          </svg>
        </button>
        <button class="favorite-button" onclick="toggleFavorite(event, 4)" aria-label="Add to favorites">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
          </svg>
        </button>
        <button class="expand-button" onclick="toggleExpand(event, 4)" aria-label="Expand card">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="6 9 12 15 18 9"/>
          </svg>
        </button>
      </div>
      <div class="expanded-content" id="content-4">
        <div class="expanded-content-inner">
          <p style="color: var(--muted-foreground); font-size: 13px;">This card demonstrates loading state with spinner in power button.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Demo Controls -->
  <div class="demo-controls">
    <h3>Demo Controls</h3>
    <button onclick="simulateRapidClicks()">Simulate Rapid Clicks</button>
    <button onclick="simulateNetworkError()">Simulate Network Error</button>
    <button onclick="toggleMobileView()">Toggle Mobile View</button>
    <p class="info-text">
      <strong>Key Features:</strong><br>
      ✓ Buttons stop propagation<br>
      ✓ 50% opacity when disabled<br>
      ✓ Golden yellow (#f5b700) primary<br>
      ✓ Green power, golden favorite<br>
      ✓ Smooth animations (200ms)
    </p>
  </div>

  <script>
    // Toggle power button
    function togglePower(event, cardId) {
      if (event) event.stopPropagation();

      const card = document.querySelector(`[data-card="${cardId}"]`);
      const powerBtn = card.querySelector('.power-button');
      const nameEl = card.querySelector('.signal-name');

      if (powerBtn.classList.contains('enabled')) {
        // Disable
        powerBtn.classList.remove('enabled');
        powerBtn.classList.add('disabled');
        powerBtn.setAttribute('aria-label', 'Enable signal');
        nameEl.classList.remove('enabled');
        nameEl.classList.add('disabled');
        card.classList.add('disabled');
        console.log('Signal disabled (card opacity: 50%)');
      } else {
        // Enable
        powerBtn.classList.remove('disabled');
        powerBtn.classList.add('enabled');
        powerBtn.setAttribute('aria-label', 'Disable signal');
        nameEl.classList.remove('disabled');
        nameEl.classList.add('enabled');
        card.classList.remove('disabled');
        console.log('Signal enabled (card opacity: 100%)');
      }
    }

    // Toggle favorite button
    function toggleFavorite(event, cardId) {
      if (event) event.stopPropagation();

      const card = document.querySelector(`[data-card="${cardId}"]`);
      const favBtn = card.querySelector('.favorite-button');
      const svg = favBtn.querySelector('svg');

      if (favBtn.classList.contains('favorited')) {
        favBtn.classList.remove('favorited');
        favBtn.setAttribute('aria-label', 'Add to favorites');
        svg.setAttribute('fill', 'none');
        console.log('Removed from favorites');
      } else {
        favBtn.classList.add('favorited');
        favBtn.setAttribute('aria-label', 'Remove from favorites');
        svg.setAttribute('fill', 'currentColor');
        console.log('Added to favorites (golden glow)');
      }
    }

    // Toggle expand
    function toggleExpand(eventOrId, cardId) {
      // Handle both direct call and event
      if (typeof eventOrId === 'object' && eventOrId.stopPropagation) {
        eventOrId.stopPropagation();
        cardId = eventOrId;
      } else if (typeof eventOrId === 'number') {
        cardId = eventOrId;
      }

      const content = document.getElementById(`content-${cardId}`);
      const expandBtn = document.querySelector(`[data-card="${cardId}"] .expand-button`);

      if (content.classList.contains('show')) {
        content.classList.remove('show');
        expandBtn.classList.remove('expanded');
        expandBtn.setAttribute('aria-label', 'Expand card');
        console.log('Card collapsed');
      } else {
        content.classList.add('show');
        expandBtn.classList.add('expanded');
        expandBtn.setAttribute('aria-label', 'Collapse card');
        console.log('Card expanded (chevron rotated 180°)');
      }
    }

    // Demo: Simulate rapid clicks
    function simulateRapidClicks() {
      console.log('Simulating 5 rapid clicks on card 1 power button...');
      const powerBtn = document.querySelector('[data-card="1"] .power-button');

      for (let i = 0; i < 5; i++) {
        setTimeout(() => {
          powerBtn.click();
          console.log(`Click ${i + 1}/5`);
        }, i * 100);
      }

      setTimeout(() => {
        alert('Notice: Each click toggles the state. In production, debouncing would prevent multiple API calls.');
      }, 600);
    }

    // Demo: Simulate network error
    function simulateNetworkError() {
      alert('Network Error Demo:\n\nIn production:\n1. Button shows loading spinner\n2. API call fails\n3. Optimistic update rolls back\n4. Error toast appears\n5. Card returns to original state');
    }

    // Demo: Toggle mobile view
    let isMobile = false;
    function toggleMobileView() {
      isMobile = !isMobile;
      if (isMobile) {
        document.body.style.maxWidth = '375px';
        document.body.style.padding = '16px';
        alert('Mobile view enabled (375px width).\n\nNotice:\n- Cards are 48px height\n- Buttons are 40px size\n- Touch-friendly spacing');
      } else {
        document.body.style.maxWidth = 'none';
        document.body.style.padding = '32px';
        alert('Desktop view restored.');
      }
    }

    // Log initial state
    console.log('=== Signal Card Redesign Mockup ===');
    console.log('Card 1: Enabled + Triggered + Unfavorited');
    console.log('Card 2: Enabled + Watching + Favorited');
    console.log('Card 3: Disabled (50% opacity)');
    console.log('Card 4: Loading state demo');
    console.log('\nTry clicking:');
    console.log('- Power buttons (green ↔ gray, card opacity 100% ↔ 50%)');
    console.log('- Favorite buttons (outline ↔ filled golden)');
    console.log('- Card body (expands/collapses)');
    console.log('- Notice: Buttons DON\'T expand card (stopPropagation)');
  </script>
</body>
</html>
